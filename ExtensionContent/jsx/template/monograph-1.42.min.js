var proto=function(){function r(a,c){for(var e=0,v=a.length;e<v;e++){var x=a[e];if(c(x))return x}return null}function y(a,c,e,v,x){return[a[0]*v+c,a[1]*x+e,a[2]*v+c,a[3]*x+e]}function M(a,c){var e={},v;for(v in a)e[v]=a[v];for(v in c)e[v]=c[v];return e}function F(a,c){if(a==c)return!0;if(a&&c){for(var e in c)if(("_"!=e[0]||"_base"==e)&&a[e]!=c[e])return!1;return!0}return!1}function N(a){return a.a&&!a.b.classed("disabled")}function z(a){return a.c}function q(a){return a.d}function B(a){return a.e}
function b(a){return a.f}function l(a,c){var e=this,v=a.split(" "),x=v[1],k=I("#"+x),d=k.node(),b=[],p;for(p in c){var m=c[p];"string"==typeof m&&(m=c[m]);b.push(new n(p,m))}e.g=b;e.h=-1;e.i=Array(t.length);e.b=k;e.j=0<d.namespaceURI.search("svg");e.k=!!k.attr("data-clip-path");e.a=!0;e.l=[];e.m=g;if(v=I("#"+v[0]).datum())e.n=v,v.l.push(e);"IFRAME"==d.tagName&&(k.on("load",function(){e.c=!0;O()}).attr("src",k.attr("data-src")+"?embedded"),e.c=!1,e.o=x,e.p=d.contentWindow,e.q="",R.push(e));e.k&&(e.o=
"url(#"+x+"_cp)",e.n.r=e);e.s=k.classed("button")?new h(e,x):null;k.classed("_",1).datum(e);ia.push(e)}function g(){if(this.r)return this.r.f;var a=this.f;if(!a)for(var c=this.l,e=c.length;e--;)var d=c[e].m(),a=a&&d?[a[0]<d[0]?a[0]:d[0],a[1]<d[1]?a[1]:d[1],a[2]>d[2]?a[2]:d[2],a[3]>d[3]?a[3]:d[3]]:a||d;return a}function h(a,c){this.o=c;this.e=this.d=!1;this.q=this.t=""}function n(a,c){var e=a.match(Aa);this.u=e.splice(0,1);this.i=t.map(function(a){return 0<=e.indexOf(a)});this.v=c}function S(){var a=
d.innerWidth,c=d.innerHeight,e=document.body;e.parentNode.style.overflow=ma?"hidden":"auto";ma?(T=Math.min(c/U,a/V),a=(a-T*V)/2,c=(c-T*U)/2):(T=1,a=a<V?0:(a-V)/2,c=c<U?0:(c-U)/2);I(e).style({background:sa?"none":W.background,width:V+"px",height:U+"px",transform:"translate("+a+"px,"+c+"px) scale("+T+")"})}function J(a,c){if(ta)na.push(c);else{ta=!0;for(var e=t.length,d=G.styles,x=[],k,b=[],u=e;u--;)k=ja?ja.indexOf(t[u]):-1,k=0>k?1:ja.length-k,x[u]=k;for(k=ia.length;k--;)ia[k].i.fill(!1);for(u=e;u--;)k=
t[u],aa("."+k+"._, ."+k+" ._").each(function(a){a.i[u]=!0});if(C||!ka){for(u in X)X[u].w=0;var p=t.indexOf("focus");aa(".focus._,.focus ._").each(function(a){for(var e=0;e<a.g.length;e++){var c=a.g[e],d=X[c.u],c=c.i;d&&c[p]&&d.w++}});var m;k=-1;for(u in X){var f=X[u].w;f>k&&(k=f,m=u)}oa=m;ka=X[m]}k=ka.width;m=ka.height;if(V!=k||U!=m)V=k,U=m,S();for(k=0;k<ia.length;k++){m=ia[k];var l=m.b,f=!m.n||m.n.a,w=null,g=-1,h=-1,n=m.v;if(f){for(var q=0;q<m.g.length;q++){var r=m.g[q];if(r.u==oa){for(var f=0,y=
m.i,z=r.i,u=e;u--;)y[u]==!!z[u]?f+=x[u]:z[u]&&(f=-Infinity);f>h&&(h=f,g=q,w=r.v)}}f=!!w}l.classed("hidden",!f);m.a=f;if(n!=g||a)if(m.k&&(m.j?(f=w?m.o:"none",m.n.b.attr({"clip-path":f}).style({"-webkit-clip-path":f,"clip-path":f})):w&&Y(m.b.select("div"),{left:("-"+w.left).replace("--",""),top:("-"+w.top).replace("--","")},null!=n)),w){if(f=m.s)h=w._opt,f.t=h&&h.pivot||"",f.e=h&&h["default"];m.v=g;m.f=w._rect;m.x=w._act;if(g=w._content){var g=l.selectAll("p").data(g),B=g.size();g.exit().remove();g.enter().append("p");
g.html(function(a,e){Y(I(this),d[a._base],e<B);return a.text})}if(null==n||a||!F(m.g[n].v,w))w._base&&(w=M(d[w._base],w)),Y(l,w,null!=n);b.push(m)}else m.f=null,m.v=null}for(k=0;k<b.length;k++)m=b[k],e=(e=m.x)&&e.load,x=b[k]=m.b.node(),e&&Z.call(x,{y:e,z:new ba(x,"load")});k&&ca.update.call(this,{elements:b});ta=!1;if(na.length){var b=na,A;na=[];for(J();b.length;)(A=b.shift())&&A()}c&&c()}}function Y(a,c,e){var d={},b={},k;for(k in c)"_"!=k[0]&&(0==k.search("svg-")?d[k.slice(4)]=c[k]:b[k]=c[k]);e?
(k=a.node(),c=ua(k),e=va(k),k=wa(k).split(" "),a.transition().ease(k[0],k[1]).duration(c).delay(e).style(b).attr(d)):a.style(b).attr(d)}function A(a,c,e){if(a&&(a=a.match(xa)[0],a!=p)){var d={},b;for(b in da)b.match(xa)[0]==a&&(d[b]=da[b]);Object.keys(d).length&&(ca.navigate.call(this,{oldScene:p,newScene:a}),p=a,X=d,oa=Object.keys(d)[0],ka=d[oa],J(!1,function(){c?P(c):ea&&!e&&P()}))}}function D(a,c,e){c||(e=a.C,c=a.B,a=a.G);if(2==a)if(C&&C.s)a=I(".button.focus").node(),pa[c].call(a,e);else{var b=
C?C.p:K;H.E(b,7,{G:a,B:c,C:e})}else 0==a?pa[c].call(d,e):1==a?H.E(K,c,e):(b=I(a).datum().p)?H.E(b,c,e):pa[c].call(a,e)}function L(a,c){var e=R.filter(N);H.F(e,2,b,function(d){var b=[],k=0;aa(".button:not(.hidden):not(.disabled),iframe:not(.hidden):not(.disabled)").each(function(a){var c=a.s;if(c){if(a=a.m())c.f=a,b[k++]=c}else if(c=e.indexOf(a),0<=c)for(c=d[c],a=c.length;a--;)b[k++]=c[a]});if(a)for(var f=b.length;f--;){var t=b[f];t.f=y(t.f,a[0],a[1],T,T)}c&&c(b)})}function E(a,c){if(c){var e=c.length;
a=Ba[a];var d=r(c,q);if(!d)return null;var b=null,k;if(4>a)for(var d=d.f,f=Ca[a],t=f[4]-1,p=f[0],m=f[1],l=f[2],f=f[3];e--;){var g=c[e],h=Da[a],n=g.t,h=[(g.f[l]-d[f])*t,n.length&&h&&h.test(n)?-1:0],n=Math.min(g.f[p],d[p])-Math.max(g.f[m],d[m]);if(0<=h[0]+8&&(h[1]||8<n))for(h[0]>>=3,h[2]=g.f[m]>>3,n=0;3>n;n++)if(!k||h[n]<k[n]){b=g;k=h;break}else if(h[n]>k[n])break}else b=c.indexOf(d),b=c[((4==a?b+1:b-1)+e)%e];b&&la(b)}else L(0,function(c){E(a,c)})}function la(a,c){var e;ea=!1;aa(".has-focus").classed("has-focus",
0);(ya=a)&&fa===a.q&&(ea=!0,e=Q(I("#"+a.o).datum()));H.F(R,3,a,function(a){for(var d=a.length;d--;)a[d]&&(ea=!0,e=Q(R[d]));ea||(e=Q());e&&J();c&&c(ea)})}function Q(a){if(C!=a){C&&(C.s&&(C.s.d=!1),aa(".focus").classed("focus",0));if(a){a.s&&(a.s.d=!0);a.b.classed("focus",1);for(var c=a;c;)c.b.classed("has-focus",1),c=c.n}ca.focuschange.call(this,{oldFocus:C&&C.b.node(),newFocus:a&&a.b.node()});C=a;return 1}}function P(a){a?(a instanceof Array&&(a=r(a,B)||a[0]),K?H.E(K,6,a):a&&la(a)):L(0,P)}function qa(){for(var a;a=
ga.pop();)if(a[0]!=p)return A(a[0],a[1]);K&&H.E(K,5)}function ba(a,c,e){return{src:fa+(fa?"/":"")+(a.id||""),type:c,data:e}}function O(a,c){a&&(fa=a,aa(".button").each(function(c){c.s.q=a}),ra=c,K=this.source);R.every(z)&&(sa&&!ra||H.F(R,1,function(a){return a.q=(fa?fa+"/":"")+a.o},function(){ra?ra():P();ca.ready.call(this,{isMaster:!sa})}))}function Z(a){var c=a.y;a=a.z||new ba(this,"",a.C);if(c){for(var c=c+",",e=!1,d=c.length,b="",k=[],t=[],p=0;p<d;p++){var g=c[p];'"'==g?e=!e:e?b+=g:" "==g||","==
g?(b.length&&(k.push(b),b=""),","==g&&k.length&&(t.push(k),k=[])):b+=g}for(p=0;p<t.length;p++)if(c=t[p],e=f[c[0]])a.args=c,e.call(this,a)}}var G=proto_data,da=G.artboards,W=G.settings,t=G.states,d=window,f=[],p,ka,oa,X,V,U,T,I=d3.select,aa=d3.selectAll,ha=d3.functor,za=d.addEventListener,ia=[],R=[],K,fa="",ra,ga=[],ea=!1,C,ya,ua=ha(W.transition_duration),wa=ha(W.easing_func+"-"+W.easing_mode),va=ha(0),ma=W.auto_scale,ja,ca=d3.dispatch("fallback","ready","focuschange","navigate","update"),sa=null!=
d.location.search.match(/\bembedded\b/),ta=!1,na=[],Ba={U:0,R:1,D:2,L:3,N:4,P:5},xa=/^\S+/i,Aa=/[^:]+/g,Da=[/u|y|a/i,/r|x|a/i,/d|y|a/i,/l|x|a/i],Ca=["20310","31022","20132","31200"],pa=[null,O,L,la,function(a){var c;"src"in a?c=r(R,function(c){return!a.src.search(c.q+"/")}):(c=I(this).datum(),a=new ba(this,a.H,a.C));for(var e=a.type,d=!1;c;){var b=c.x;if(b&&b[e]){Z.call(c.b.node(),{y:b[e],z:a});d=!0;break}c=c.n}d||(K?H.E(K,4,a):ca.fallback.call(this,a))},qa,P,D,Z],H=function(a){function c(a,c,d,f){if(a){var t=
"r"+b++;f&&(e[t]=f);a.postMessage({o:t,A:!!f,B:c,C:d},"*")}}var e={},b=0;za("message",function(c){var b=c.data,d=b.C,f=b.B;0==f?(f=d.o,e[f]&&(e[f](d.C),e[f]=null)):(b=b.A?function(a){H.D(c,a)}:null,(f=a[f])&&f.call(c,d,b))});return{E:c,F:function(a,e,b,d){var f=a.length,t=[];!f&&d&&d(t);a.map(function(a,p){var g="function"==typeof b?b(a,p):b;c(a.p,e,g,function(a){t[p]=a;!--f&&d&&d(t)})})},D:function(a,e){c(a.source,0,{o:a.data.o,C:e})}}}(pa);return{SELF:0,PARENT:1,FOCUS:2,init:function(){var a=G.keyframes,
c;for(c in a)new l(c,a[c]);za("resize",S);A(Object.keys(da)[0]);O()},tell:function(a,c,e){D(a,8,{y:c,C:e})},move:E,trigger:function(a,c,e){c&&D(a,4,{H:c,C:e})},on:function(a,c){return ca.on(a,c)},back:qa,update:J,focus:function(a){if(a){var c=I(a).datum(),e=c.s;e?P(e):c.p&&D(a,6)}},"goto":function(a,c){var e=ga.pop();e&&e[0]!=p&&ga.push(e);ga.push([p,ya]);99<ga.length&&ga.shift();A(a,null,c)},define:function(a,c){a.pop||(a=[a]);for(var e=a.length;e--;)f[a[e]]=c},option:function(a,c){var e=void 0===
c;switch(a){case "duration":return e?ua:ua=ha(c);case "delay":return e?va:va=ha(c);case "easing":return e?wa:wa=ha(c);case "autoscale":return e?ma:S(ma=c);case "states":return e?ja:ja=c}}}}();
(function(){function r(b,l){var g=b.split("/").filter(Boolean);return[g[l?"pop":"shift"](),g.join("/")]}function y(b){return d3.selectAll('[data-name="'+b+'"]')[0]}function M(b,l,g){for(var h=!1,n=b.length;n--;){var q=b[n].classList,r=q.contains(g);if("add"==l?!r:"remove"==l?r:1)h=!0;q[l](g)}h&&z.update()}function F(b){var l=r(b,0),g=l[0];b=l[1];var h='"'+[].slice.call(arguments,1).join('" "')+'"';b&&(h="tell "+b+" "+h);"."==g?B(proto.PARENT,h):y(g).map(function(b){B(b,h)})}function N(b){b=r(b,1);
var l=b[0];(b=b[1])?F(b,"focus",l):(l=y(l)[0])&&z.focus(l)}var z=proto,q=z.define,B=z.tell;q(["set","unset","toggle"],function(b){var l,g=b.args;b=g[0];l=g[1];if(g=g[2]){l=r(l,1);var h=l[0];if(l=l[1]){F(l,b,h,g);return}l=y(h)}else g=l,l=[this];M(l,"set"==b?"add":"unset"==b?"remove":"toggle",g)});q("tell",function(b){F.apply(this,b.args.slice(1))});q("do",function(b){z.trigger(2,b.args[1])});q("move",function(b){z.move(b.args[1])});q("wait",function(b){b=b.args;var l='"'+[].slice.call(b,2).join('" "')+
'"',g=this;setTimeout(function(){B(g,l)},1*b[1])});q("goto",function(b){b=b.args;var l=b[1];"focus"==b[2]?(z["goto"](l,!0),N(b[3])):z["goto"](l)});q(["enable","disable","toggle-enable"],function(b){function l(b){if(b.classList.contains("button")||"IFRAME"==b.tagName)n.push(b);else{b=b.querySelectorAll(".button,iframe");for(var g=b.length;g--;)n.push(b[g])}}var g=b.args;b=g[0];var h=g[1],n=[];h?(h=r(h,1),g=h[0],(h=h[1])?F(h,b,g):y(g).map(l)):l(this);M(n,"disable"==b?"add":"enable"==b?"remove":"toggle",
"disabled")});q("focus",function(b){N(b.args[1])});q("back",function(){z.back()})})();
proto.on("ready.input",function(r){function y(b){return!b.classList.contains("disabled")}function M(b){if(J!=b){var d=document.body.classList;J&&d.remove(J);d.add(b);J=b;L()}}function F(){y(this)&&(this.classList.add("press"),L())}function N(){S(".button.press").classed("press",!1).size()&&L()}function z(b){var d=typeof b;if("string"==d||"number"==d)return!0;if("object"==d){for(var f in b)if(d=typeof b[f],"string"!=d&&"number"!=d)return!1;return!0}}function q(b){var d={},f;for(f in b){var p=b[f];
z(p)&&(d[f]=p)}return d}var B=r.isMaster,b=proto;r=proto_data.settings;var l=!1,g=!1,h=!1,n=window.addEventListener,S=d3.selectAll,J,Y=b.define,A=b.tell,D=b.trigger,L=b.update,E=b.FOCUS;b.option("states",["press","focus","hover"]);b.on("fallback",function(g){g=g.type;switch(g){case "L":case "R":case "U":case "D":b.move(g);break;case "B":case "ESC":A(E,"back")}});Y("_input",function(b){M(b.args[1])});Y("_press",F);Y("_release",N);if(r.input_controller&&B){var la=function(b,d){this.P=b;this.J=d;this.R=
0;this.N=!1;var f=this.Q=0,g=18,l=0,h=0;this.I=function(b,d){this.R=d||0;b?(0<f?f--:(Q("buttondown",this),this.Q++,f=g,2<g&&(g=2*g/3)),this.N||(l=12),0<l&&l--):this.N&&(Q("buttonup",this),f=0,g=18,this.Q=0,0<l&&(0<h?(Q("buttondbltap",this),h=0):h=24));0<h&&(h--,0==h&&Q("buttontap",this));this.N=b}},Q=function(b,d){var f={controller:d.P,button:d.J.O,repeated:d.Q,value:d.R,isHandled:!1},g=document.createEvent("CustomEvent");g.initCustomEvent(b,!1,!1,f);window.dispatchEvent(g)},P=function(b){this.I=
(new qa(b,W)).I},qa=function(b,d){for(var f=[],g=0;g<d.length;g++)f[g]=new la(b,d[g]);this.I=function(b){for(var d=f.length;d--;){var g=f[d],h=g.J;if(null!=h.K){var l=b.buttons[h.K];l&&g.I(l.pressed,l.value)}else null!=h.L&&(l=b.axes[h.L],h=l*h.M,g.I(.7<h?!0:.2>h?!1:g.N,l))}}},ba=function(){G=Date.now();if(G-Z>da){Z=G-(G-Z)%da;for(var b=navigator.getGamepads(),d=0;d<b.length;d++){var f=b[d];f&&(O[d]||/xbox 360|controller/i.test(f.id)&&15<=f.buttons.length&&(O[d]=new P(d)),O[d]&&O[d].I(f))}}window.requestAnimationFrame(ba)},
O=[],Z=Date.now(),G,da=17;navigator.getGamepads&&(ba(),B=function(b){return function(d){d=d.detail;d.isHandled||D(2,b[d.button],d)}},n("buttondown",B({LStickLeft:"L",DpadLeft:"L",LStickRight:"R",DpadRight:"R",LStickUp:"U",DpadUp:"U",LStickDown:"D",DpadDown:"D",LB:"LB",RB:"RB",LT:"LT",RT:"RT"})),n("buttonup",B({A:"A",B:"B",X:"X",Start:"Menu",Back:"View"})),n("buttontap",B({Y:"Y"})),n("buttondbltap",B({Y:"dblY"})),n("buttondown",function(b){A(E,"_input controller");"A"!=b.detail.button||l||(l=!0,A(E,
"_press"))}),n("buttonup",function(b){"A"==b.detail.button&&(l=!1,A(E,"_release"))}));var W=[{K:0,O:"A"},{K:1,O:"B"},{K:2,O:"X"},{K:3,O:"Y"},{K:4,O:"LB"},{K:5,O:"RB"},{K:6,O:"LT"},{K:7,O:"RT"},{K:8,O:"Back"},{K:9,O:"Start"},{K:10,O:"LStick"},{K:11,O:"RStick"},{K:12,O:"DpadUp"},{K:13,O:"DpadDown"},{K:14,O:"DpadLeft"},{K:15,O:"DpadRight"},{L:0,M:-1,O:"LStickLeft"},{L:0,M:1,O:"LStickRight"},{L:1,M:-1,O:"LStickUp"},{L:1,M:1,O:"LStickDown"},{L:2,M:-1,O:"RStickLeft"},{L:2,M:1,O:"RStickRight"},{L:3,M:-1,
O:"RStickUp"},{L:3,M:1,O:"RStickDown"}]}r.input_keyboard&&(n("keydown",function(h){function d(b){A(E,"_input keyboard");D(E,b,q(h));h.preventDefault()}switch(h.keyCode){case 13:g||(g=!0,A(E,"_press"));break;case 37:return d("L");case 38:return d("U");case 39:return d("R");case 40:return d("D");case 9:A(E,"_input keyboard"),h.preventDefault(),b.move(h.shiftKey?"P":"N")}}),n("keyup",function(b){function d(d){D(2,d,q(b));b.preventDefault()}var f=b.keyCode;if(65<=f&&90>=f)return d(String.fromCharCode(f)+
"Key");if(48<=f&&57>=f)return d("D"+String.fromCharCode(f));switch(f){case 27:return d("ESC");case 32:return d("SPACE");case 8:return d("BACK");case 13:return g=!1,A(E,"_release"),d("ENTER")}}));r.input_mouse&&(S(".button").on("mouseenter",function(){y(this)&&(this.classList.add("hover"),L())}).on("mouseleave",function(){this.classList.remove("hover");L()}).on("mousedown",function(){y(this)&&(M("mouse"),F.call(this),b.focus(this))}).on("click",function(){y(this)&&D(this,"MLB",q(d3.event))}).on("dblclick",
function(){y(this)&&D(this,"dblMLB",q(d3.event))}).on("contextmenu",function(){y(this)&&D(this,"MRB",q(d3.event));d3.event.preventDefault()}),n("mouseup",function(){N()}));if(r.input_touch)S("head").append("script").attr("type","text/javascript").attr("src","https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.6/hammer.min.js").on("load",function(){var g=function(b){for(b=b.target;b&&!b.classList.contains("button");)b=b.parentElement;return b},d=function(b){return function(d){var f=d.pointerType;
("touch"==f||"pen"==f)&&(f=g(d))&&D(f,b,q(d))}},f=Hammer;(new f.Manager(document.body,{recognizers:[[f.Tap],[f.Press],[f.Pan],[f.Pinch,null,["pan"]],[f.Swipe,null,["pan"]]]})).on("tap",d("TAP")).on("press",d("HOLD")).on("panend panmove",d("PAN")).on("swipeup",d("SWIPEU")).on("swipedown",d("SWIPED")).on("swipeleft",d("SWIPEL")).on("swiperight",d("SWIPER")).on("pinchend pinchmove",d("PINCH")).on("hammer.input",function(d){var f=d.pointerType;if("touch"==f||"pen"==f){d.preventDefault();var l=0<d.srcEvent.touches.length;
l&&!h?(d=g(d))&&y(d)&&(M(f),F.call(d),b.focus(d)):!l&&h&&N();h=l}})})});
