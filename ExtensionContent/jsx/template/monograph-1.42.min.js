var proto=function(){function v(a,c){for(var d=0,x=a.length;d<x;d++){var t=a[d];if(c(t))return t}return null}function y(a,c,d,x,t){return[a[0]*x+c,a[1]*t+d,a[2]*x+c,a[3]*t+d]}function O(a){for(var c={},d=arguments,x=/svg|fill|stroke/,t=/width|height|left|top|border|background/,g=1;g<d.length;g++){var b=d[g];if(b)for(var p in b)a&&!p.search(t)||!a&&!p.search(x)||(c[p]=b[p])}return c}function F(a,c){if(a==c)return!0;if(a&&c){for(var d in c)if(("_"!=d[0]||"_base"==d)&&a[d]!=c[d])return!1;return!0}return!1}
function P(a){return a.a&&!a.b.classed("disabled")}function z(a){return a.c}function u(a){return a.d}function w(a){return a.e}function b(a){return a.f}function h(a,c){var d=this,x=a.split(" "),t=x[1],g=I("#"+t),b=g.node(),p=[],l;for(l in c){var r=c[l];"string"==typeof r&&(r=c[r]);p.push(new q(l,r))}d.g=p;d.h=-1;d.i=Array(Q.length);d.b=g;d.j=0<b.namespaceURI.search("svg");d.k=!!g.attr("data-clip-path");d.a=!0;d.l=[];d.m=k;if(x=I("#"+x[0]).datum())d.n=x,x.l.push(d);"IFRAME"==b.tagName&&(g.on("load",
function(){d.c=!0;Z()}).attr("src",g.attr("data-src")+"?embedded"),d.c=!1,d.o=t,d.p=b.contentWindow,d.q="",T.push(d));if(d.k)for(d.o="url(#"+t+"_cp)",x.r=d;x;)x.b.style("pointer-events","none"),x=x.n;d.s=g.classed("button")?new n(d,t):null;g.classed("_",1).datum(d);ia.push(d)}function k(){if(this.r)return this.r.f;var a=this.f;if(!a)for(var c=this.l,d=c.length;d--;)var b=c[d].m(),a=a&&b?[a[0]<b[0]?a[0]:b[0],a[1]<b[1]?a[1]:b[1],a[2]>b[2]?a[2]:b[2],a[3]>b[3]?a[3]:b[3]]:a||b;return a}function n(a,c){this.o=
c;this.e=this.d=!1;this.q=this.t=""}function q(a,c){var d=a.match(ya);this.u=d.splice(0,1);this.i=Q.map(function(a){return 0<=d.indexOf(a)});this.v=c}function U(){var a=l.innerWidth,c=l.innerHeight,d=document.body;d.parentNode.style.overflow=la?"hidden":"auto";la?(G=Math.min(c/V,a/W),a=(a-G*W)/2,c=(c-G*V)/2):(G=1,a=a<W?0:(a-W)/2,c=c<V?0:(c-V)/2);I(d).style({background:ra?"none":R.background,width:W+"px",height:V+"px",transform:"translate("+a+"px,"+c+"px) scale("+G+")"})}function J(a,c){if(sa)ma.push(c);
else{sa=!0;for(var d=Q.length,b=K.styles,t=[],g,l=[],p=d;p--;)g=aa.indexOf(Q[p]),g=0>g?1:aa.length-g,t[p]=g;for(g=ia.length;g--;)ia[g].i.fill(!1);for(p=d;p--;)g=Q[p],ba("."+g+"._, ."+g+" ._").each(function(a){a.i[p]=!0});if(B||!m){for(p in X)X[p].w=0;for(p=aa.length;p--;){g=aa[p];var f=Q.indexOf(g);ba("."+g+" ._,."+g+"._").each(function(a){for(var d=0;d<a.g.length;d++){var c=a.g[d],g=X[c.u],c=c.i;g&&c[f]&&(g.w+=p)}})}var r;g=-1;for(p in X){var e=X[p].w;e>g&&(g=e,r=p)}na=r;m=X[r]}g=m.width;r=m.height;
if(W!=g||V!=r)W=g,V=r,U();for(g=0;g<ia.length;g++){r=ia[g];var h=r.b,e=!r.n||r.n.a,k=null,n=-1,q=-1,u=r.v;if(e){for(var v=0;v<r.g.length;v++){var w=r.g[v];if(w.u==na){for(var e=0,y=r.i,G=w.i,p=d;p--;)y[p]==!!G[p]?e+=t[p]:G[p]&&(e=-Infinity);e>q&&(q=e,n=v,k=w.v)}}e=!!k}h.classed("hidden",!e);r.a=e;if(u!=n||a)if(r.k&&(r.j?(e=k?r.o:"none",r.n.b.attr({"clip-path":e}).style({"-webkit-clip-path":e,"clip-path":e})):k&&Y(r.b.select("div"),{left:("-"+k.left).replace("--",""),top:("-"+k.top).replace("--","")},
null!=u)),k){if(e=r.s)q=k._opt,e.t=q&&q.pivot||"",e.e=q&&q["default"];r.v=n;r.f=k._rect;r.x=k._act;if(n=k._content){var n=h.selectAll("p").data(n),z=n.size();n.exit().remove();n.enter().append("p");n.html(function(a,d){Y(I(this),b[a._base],d<z);return a.text})}if(null==u||a||!F(r.g[u].v,k))k=O(r.j,b[k._base],k),Y(h,k,null!=u);l.push(r)}else r.f=null,r.v=null}for(g=0;g<l.length;g++)r=l[g],d=(d=r.x)&&d.load,t=l[g]=r.b.node(),d&&S.call(t,{y:d,z:new ja(t,"load")});g&&ca.update.call(this,{elements:l});
sa=!1;if(ma.length){var l=ma,A;ma=[];for(J();l.length;)(A=l.shift())&&A()}c&&c()}}function Y(a,c,d){var b={},t={},g;for(g in c)"_"!=g[0]&&(0==g.search("svg-")?b[g.slice(4)]=c[g]:t[g]=c[g]);d?(g=a.node(),c=ta(g),d=ua(g),g=va(g).split(" "),a.transition().ease(g[0],g[1]).duration(c).delay(d).style(t).attr(b)):a.style(t).attr(b)}function C(a,c,d){if(a&&a!=e){var b={},t;for(t in L)a==L[t].scene&&(b[t]=L[t]);Object.keys(b).length&&(ca.navigate.call(this,{oldScene:e,newScene:a}),e=a,X=b,na=Object.keys(b)[0],
m=b[na],J(!1,function(){c?D(c):da&&!d&&D()}))}}function E(a,c,d){c||(d=a.C,c=a.B,a=a.G);if(2==a)if(B&&B.s)a=I(".button.focus").node(),oa[c].call(a,d);else{var b=B?B.p:M;H.E(b,7,{G:a,B:c,C:d})}else 0==a?oa[c].call(l,d):1==a?H.E(M,c,d):(b=I(a).datum().p)?H.E(b,c,d):oa[c].call(a,d)}function N(a,c){var d=T.filter(P);H.F(d,2,b,function(b){var t=[],g=0;ba(".button:not(.hidden):not(.disabled),iframe:not(.hidden):not(.disabled)").each(function(a){var c=a.s;if(c){if(a=a.m())c.f=a,t[g++]=c}else if(c=d.indexOf(a),
0<=c)for(c=b[c],a=c.length;a--;)t[g++]=c[a]});if(a)for(var l=t.length;l--;){var e=t[l];e.f=y(e.f,a[0],a[1],G,G)}c&&c(t)})}function ea(a,c){if(c){var d=c.length;a=za[a];var b=v(c,u);if(!b)return null;var l=null,g;if(4>a)for(var b=b.f,e=Aa[a],p=e[4]-1,f=e[0],m=e[1],k=e[2],e=e[3];d--;){var h=c[d],n=Ba[a],q=h.t,n=[(h.f[k]-b[e])*p,q.length&&n&&n.test(q)?-1:0],q=Math.min(h.f[f],b[f])-Math.max(h.f[m],b[m]);if(0<=n[0]+8&&(n[1]||8<q))for(n[0]>>=3,n[2]=h.f[m]>>3,q=0;3>q;q++)if(!g||n[q]<g[q]){l=h;g=n;break}else if(n[q]>
g[q])break}else l=c.indexOf(b),l=c[((4==a?l+1:l-1)+d)%d];l&&A(l)}else N(0,function(c){ea(a,c)})}function A(a,c){var d;da=!1;ba(".has-focus").classed("has-focus",0);(wa=a)&&fa===a.q&&(da=!0,d=ka(I("#"+a.o).datum()));H.F(T,3,a,function(a){for(var b=a.length;b--;)a[b]&&(da=!0,d=ka(T[b]));da||(d=ka());d&&J();c&&c(da)})}function ka(a){if(B!=a){B&&(B.s&&(B.s.d=!1),ba(".focus").classed("focus",0));if(a){a.s&&(a.s.d=!0);a.b.classed("focus",1);for(var c=a;c;)c.b.classed("has-focus",1),c=c.n}ca.focuschange.call(this,
{oldFocus:B&&B.b.node(),newFocus:a&&a.b.node()});B=a;return 1}}function D(a){a?(a instanceof Array&&(a=v(a,w)||a[0]),M?H.E(M,6,a):a&&A(a)):N(0,D)}function pa(){for(var a;a=ga.pop();)if(a[0]!=e)return C(a[0],a[1]);M&&H.E(M,5)}function ja(a,c,d){return{src:fa+(fa?"/":"")+(a.id||""),type:c,data:d}}function Z(a,c){a&&(fa=a,ba(".button").each(function(c){c.s.q=a}),qa=c,M=this.source);T.every(z)&&(ra&&!qa||H.F(T,1,function(a){return a.q=(fa?fa+"/":"")+a.o},function(){qa?qa():D();ca.ready.call(this,{isMaster:!ra})}))}
function S(a){var c=a.y;a=a.z||new ja(this,"",a.C);if(c){for(var c=c+",",d=!1,b=c.length,l="",g=[],e=[],p=0;p<b;p++){var m=c[p];'"'==m?d=!d:d?l+=m:" "==m||","==m?(l.length&&(g.push(l),l=""),","==m&&g.length&&(e.push(g),g=[])):l+=m}for(p=0;p<e.length;p++)if(c=e[p],d=f[c[0]])a.args=c,d.call(this,a)}}var K=proto_data,L=K.artboards,R=K.settings,Q=K.states,l=window,f=[],e,m,na,X,W,V,G,I=d3.select,ba=d3.selectAll,ha=d3.functor,xa=l.addEventListener,ia=[],T=[],M,fa="",qa,ga=[],da=!1,B,wa,ta=ha(R.transition_duration),
va=ha(R.easing_func+"-"+R.easing_mode),ua=ha(0),la=R.auto_scale,aa=["press","focus","hover"],ca=d3.dispatch("fallback","ready","focuschange","navigate","update"),ra=null!=l.location.search.match(/\bembedded\b/),sa=!1,ma=[],za={U:0,R:1,D:2,L:3,N:4,P:5},ya=/[^:]+/g,Ba=[/u|y|a/i,/r|x|a/i,/d|y|a/i,/l|x|a/i],Aa=["20310","31022","20132","31200"],oa=[null,Z,N,A,function(a){var c;"src"in a?c=v(T,function(c){return!a.src.search(c.q+"/")}):(c=I(this).datum(),a=new ja(this,a.H,a.C));for(var d=a.type,b=!1;c;){var l=
c.x;if(l&&l[d]){S.call(c.b.node(),{y:l[d],z:a});b=!0;break}c=c.n}b||(M?H.E(M,4,a):ca.fallback.call(this,a))},pa,D,E,S],H=function(a){function c(a,c,l,e){if(a){var m="r"+b++;e&&(d[m]=e);a.postMessage({o:m,A:!!e,B:c,C:l},"*")}}var d={},b=0;xa("message",function(c){var b=c.data,l=b.C,e=b.B;0==e?(e=l.o,d[e]&&(d[e](l.C),d[e]=null)):(b=b.A?function(a){H.D(c,a)}:null,(e=a[e])&&e.call(c,l,b))});return{E:c,F:function(a,d,b,l){var e=a.length,m=[];!e&&l&&l(m);a.map(function(a,f){var h="function"==typeof b?b(a,
f):b;c(a.p,d,h,function(a){m[f]=a;!--e&&l&&l(m)})})},D:function(a,d){c(a.source,0,{o:a.data.o,C:d})}}}(oa);return{SELF:0,PARENT:1,FOCUS:2,init:function(){var a=K.keyframes,c;for(c in a)new h(c,a[c]);xa("resize",U);C(L[0].scene);Z()},tell:function(a,c,d){E(a,8,{y:c,C:d})},move:ea,trigger:function(a,c,d){c&&E(a,4,{H:c,C:d})},on:function(a,c){return ca.on(a,c)},back:pa,update:J,focus:function(a){if(a){var c=I(a).datum(),d=c.s;d?D(d):c.p&&E(a,6)}},"goto":function(a,c){var d=ga.pop();d&&d[0]!=e&&ga.push(d);
ga.push([e,wa]);99<ga.length&&ga.shift();C(a,null,c)},define:function(a,c){a.pop||(a=[a]);for(var d=a.length;d--;)f[a[d]]=c},option:function(a,c){var d=void 0===c;switch(a){case "duration":return d?ta:ta=ha(c);case "delay":return d?ua:ua=ha(c);case "easing":return d?va:va=ha(c);case "autoscale":return d?la:U(la=c);case "states":return d?aa:aa=c}}}}();
(function(){function v(b,h){var k=b.split("/").filter(Boolean);return[k[h?"pop":"shift"](),k.join("/")]}function y(b){return d3.selectAll('[data-name="'+b+'"]')[0]}function O(b,h,k){for(var n=!1,q=b.length;q--;){var u=b[q].classList,v=u.contains(k);if("add"==h?!v:"remove"==h?v:1)n=!0;u[h](k)}n&&z.update()}function F(b){var h=v(b,0),k=h[0];b=h[1];var n='"'+[].slice.call(arguments,1).join('" "')+'"';b&&(n="tell "+b+" "+n);"."==k?w(proto.PARENT,n):y(k).map(function(b){w(b,n)})}function P(b){b=v(b,1);
var h=b[0];(b=b[1])?F(b,"focus",h):(h=y(h)[0])&&z.focus(h)}var z=proto,u=z.define,w=z.tell;u(["set","unset","toggle"],function(b){var h,k=b.args;b=k[0];h=k[1];if(k=k[2]){h=v(h,1);var n=h[0];if(h=h[1]){F(h,b,n,k);return}h=y(n)}else k=h,h=[this];O(h,"set"==b?"add":"unset"==b?"remove":"toggle",k)});u("tell",function(b){F.apply(this,b.args.slice(1))});u("do",function(b){z.trigger(2,b.args[1])});u("move",function(b){z.move(b.args[1])});u("wait",function(b){b=b.args;var h='"'+[].slice.call(b,2).join('" "')+
'"',k=this;setTimeout(function(){w(k,h)},1*b[1])});u("goto",function(b){b=b.args;var h=b[1];"focus"==b[2]?(z["goto"](h,!0),P(b[3])):z["goto"](h)});u(["enable","disable","toggle-enable"],function(b){function h(b){if(b.classList.contains("button")||"IFRAME"==b.tagName)q.push(b);else{b=b.querySelectorAll(".button,iframe");for(var h=b.length;h--;)q.push(b[h])}}var k=b.args;b=k[0];var n=k[1],q=[];n?(n=v(n,1),k=n[0],(n=n[1])?F(n,b,k):y(k).map(h)):h(this);O(q,"disable"==b?"add":"enable"==b?"remove":"toggle",
"disabled")});u("focus",function(b){P(b.args[1])});u("back",function(){z.back()})})();
proto.on("ready.input",function(v){function y(b){return!b.classList.contains("disabled")}function O(b){if(J!=b){var f=document.body.classList;J&&f.remove(J);f.add(b);J=b;N()}}function F(){y(this)&&(this.classList.add("press"),N())}function P(){U(".button.press").classed("press",!1).size()&&N()}function z(b){var f=typeof b;if("string"==f||"number"==f)return!0;if("object"==f){for(var e in b)if(f=typeof b[e],"string"!=f&&"number"!=f)return!1;return!0}}function u(b){var f={},e;for(e in b){var m=b[e];
z(m)&&(f[e]=m)}return f}var w=v.isMaster,b=proto;v=proto_data.settings;var h=!1,k=!1,n=!1,q=window.addEventListener,U=d3.selectAll,J,Y=b.define,C=b.tell,E=b.trigger,N=b.update,ea=b.move,A=b.FOCUS;b.on("fallback",function(b){b=b.type;switch(b){case "L":case "R":case "U":case "D":ea(b);break;case "TAB":ea("N");break;case "STAB":ea("P");break;case "B":case "ESC":case "BACK":C(A,"back")}});Y("_input",function(b){O(b.args[1])});Y("_press",F);Y("_release",P);if(v.input_controller&&w){var ka=function(b,
f){this.P=b;this.J=f;this.R=0;this.N=!1;var e=this.Q=0,m=18,h=0,k=0;this.I=function(b,l){this.R=l||0;b?(0<e?e--:(D("buttondown",this),this.Q++,e=m,2<m&&(m=2*m/3)),this.N||(h=12),0<h&&h--):this.N&&(D("buttonup",this),e=0,m=18,this.Q=0,0<h&&(0<k?(D("buttondbltap",this),k=0):k=24));0<k&&(k--,0==k&&D("buttontap",this));this.N=b}},D=function(b,f){var e={controller:f.P,button:f.J.O,repeated:f.Q,value:f.R,isHandled:!1},m=document.createEvent("CustomEvent");m.initCustomEvent(b,!1,!1,e);window.dispatchEvent(m)},
pa=function(b){this.I=(new ja(b,Q)).I},ja=function(b,f){for(var e=[],m=0;m<f.length;m++)e[m]=new ka(b,f[m]);this.I=function(b){for(var l=e.length;l--;){var m=e[l],f=m.J;if(null!=f.K){var h=b.buttons[f.K];h&&m.I(h.pressed,h.value)}else null!=f.L&&(h=b.axes[f.L],f=h*f.M,m.I(.7<f?!0:.2>f?!1:m.N,h))}}},Z=function(){L=Date.now();if(L-K>R){K=L-(L-K)%R;for(var b=navigator.getGamepads(),f=0;f<b.length;f++){var e=b[f];e&&(S[f]||/xbox 360|controller/i.test(e.id)&&15<=e.buttons.length&&(S[f]=new pa(f)),S[f]&&
S[f].I(e))}}window.requestAnimationFrame(Z)},S=[],K=Date.now(),L,R=17;navigator.getGamepads&&(Z(),w=function(b){return function(f){f=f.detail;f.isHandled||E(2,b[f.button],f)}},q("buttondown",w({LStickLeft:"L",DpadLeft:"L",LStickRight:"R",DpadRight:"R",LStickUp:"U",DpadUp:"U",LStickDown:"D",DpadDown:"D",LB:"LB",RB:"RB",LT:"LT",RT:"RT"})),q("buttonup",w({A:"A",B:"B",X:"X",Start:"Menu",Back:"View"})),q("buttontap",w({Y:"Y"})),q("buttondbltap",w({Y:"dblY"})),q("buttondown",function(b){C(A,"_input controller");
"A"!=b.detail.button||h||(h=!0,C(A,"_press"))}),q("buttonup",function(b){"A"==b.detail.button&&(h=!1,C(A,"_release"))}));var Q=[{K:0,O:"A"},{K:1,O:"B"},{K:2,O:"X"},{K:3,O:"Y"},{K:4,O:"LB"},{K:5,O:"RB"},{K:6,O:"LT"},{K:7,O:"RT"},{K:8,O:"Back"},{K:9,O:"Start"},{K:10,O:"LStick"},{K:11,O:"RStick"},{K:12,O:"DpadUp"},{K:13,O:"DpadDown"},{K:14,O:"DpadLeft"},{K:15,O:"DpadRight"},{L:0,M:-1,O:"LStickLeft"},{L:0,M:1,O:"LStickRight"},{L:1,M:-1,O:"LStickUp"},{L:1,M:1,O:"LStickDown"},{L:2,M:-1,O:"RStickLeft"},
{L:2,M:1,O:"RStickRight"},{L:3,M:-1,O:"RStickUp"},{L:3,M:1,O:"RStickDown"}]}v.input_keyboard&&(w=function(b,f){return function(e){var m=e.keyCode;e.shiftKey&&(m+="+");if(m=f(m)||b[m])E(A,m,u(e)),e.preventDefault()}},q("keydown",w({37:"L",38:"U",39:"R",40:"D",9:"TAB","9+":"STAB"},function(b){C(A,"_input keyboard");13!=b||k||(k=!0,C(A,"_press"))})),q("keyup",w({8:"BACK",27:"ESC",32:"SPACE",33:"PGUP",34:"PGDN",35:"END",36:"HOME"},function(b){var f=String.fromCharCode(b);if(65<=b&&90>=b)return f+"Key";
if(48<=b&&57>=b)return"D"+f;if(13==b)return k=!1,C(A,"_release"),"ENTER"})));v.input_mouse&&(U(".button").on("mouseenter",function(){y(this)&&(this.classList.add("hover"),N())}).on("mouseleave",function(){this.classList.remove("hover");N()}).on("mousedown",function(){y(this)&&(O("mouse"),F.call(this),b.focus(this))}).on("click",function(){y(this)&&E(this,"MLB",u(d3.event))}).on("dblclick",function(){y(this)&&E(this,"dblMLB",u(d3.event))}).on("contextmenu",function(){y(this)&&E(this,"MRB",u(d3.event));
d3.event.preventDefault()}),q("mouseup",function(){P()}));if(v.input_touch)U("head").append("script").attr("type","text/javascript").attr("src","https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.6/hammer.min.js").on("load",function(){var h=function(b){for(b=b.target;b&&!b.classList.contains("button");)b=b.parentElement;return b},f=function(b){return function(e){var f=e.pointerType;("touch"==f||"pen"==f)&&(f=h(e))&&E(f,b,u(e))}},e=Hammer;(new e.Manager(document.body,{recognizers:[[e.Tap],[e.Press],
[e.Pan],[e.Pinch,null,["pan"]],[e.Swipe,null,["pan"]]]})).on("tap",f("TAP")).on("press",f("HOLD")).on("panend panmove",f("PAN")).on("swipeup",f("SWIPEU")).on("swipedown",f("SWIPED")).on("swipeleft",f("SWIPEL")).on("swiperight",f("SWIPER")).on("pinchend pinchmove",f("PINCH")).on("hammer.input",function(e){var f=e.pointerType;if("touch"==f||"pen"==f){e.preventDefault();var k=0<e.srcEvent.touches.length;k&&!n?(e=h(e))&&y(e)&&(O(f),F.call(e),b.focus(e)):!k&&n&&P();n=k}})})});
