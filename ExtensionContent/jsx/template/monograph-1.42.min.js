var proto=function(){function u(a,c){for(var d=0,p=a.length;d<p;d++){var y=a[d];if(c(y))return y}return null}function v(a,c,d,p,y){return[a[0]*p+c,a[1]*y+d,a[2]*p+c,a[3]*y+d]}function O(a,c){var d={},p;for(p in a)d[p]=a[p];for(p in c)d[p]=c[p];return d}function F(a,c){if(a==c)return!0;if(a&&c){for(var d in c)if(("_"!=d[0]||"_base"==d)&&a[d]!=c[d])return!1;return!0}return!1}function P(a){return a.a&&!a.b.classed("disabled")}function z(a){return a.c}function t(a){return a.d}function w(a){return a.e}
function b(a){return a.f}function l(a,c){var d=this,p=a.split(" "),y=p[1],k=H("#"+y),b=k.node(),h=[],f;for(f in c){var n=c[f];"string"==typeof n&&(n=c[n]);h.push(new q(f,n))}d.g=h;d.h=-1;d.i=Array(Q.length);d.b=k;d.j=0<b.namespaceURI.search("svg");d.k=!!k.attr("data-clip-path");d.a=!0;d.l=[];d.m=g;if(p=H("#"+p[0]).datum())d.n=p,p.l.push(d);"IFRAME"==b.tagName&&(k.on("load",function(){d.c=!0;Z()}).attr("src",k.attr("data-src")+"?embedded"),d.c=!1,d.o=y,d.p=b.contentWindow,d.q="",T.push(d));if(d.k)for(d.o=
"url(#"+y+"_cp)",p.r=d;p;)p.b.style("pointer-events","none"),p=p.n;d.s=k.classed("button")?new m(d,y):null;k.classed("_",1).datum(d);ia.push(d)}function g(){if(this.r)return this.r.f;var a=this.f;if(!a)for(var c=this.l,d=c.length;d--;)var p=c[d].m(),a=a&&p?[a[0]<p[0]?a[0]:p[0],a[1]<p[1]?a[1]:p[1],a[2]>p[2]?a[2]:p[2],a[3]>p[3]?a[3]:p[3]]:a||p;return a}function m(a,c){this.o=c;this.e=this.d=!1;this.q=this.t=""}function q(a,c){var d=a.match(ya);this.u=d.splice(0,1);this.i=Q.map(function(a){return 0<=
d.indexOf(a)});this.v=c}function U(){var a=h.innerWidth,c=h.innerHeight,d=document.body;d.parentNode.style.overflow=la?"hidden":"auto";la?(I=Math.min(c/V,a/W),a=(a-I*W)/2,c=(c-I*V)/2):(I=1,a=a<W?0:(a-W)/2,c=c<V?0:(c-V)/2);H(d).style({background:ra?"none":R.background,width:W+"px",height:V+"px",transform:"translate("+a+"px,"+c+"px) scale("+I+")"})}function J(a,c){if(sa)ma.push(c);else{sa=!0;for(var d=Q.length,p=K.styles,y=[],k,b=[],h=d;h--;)k=aa.indexOf(Q[h]),k=0>k?1:aa.length-k,y[h]=k;for(k=ia.length;k--;)ia[k].i.fill(!1);
for(h=d;h--;)k=Q[h],ba("."+k+"._, ."+k+" ._").each(function(a){a.i[h]=!0});if(A||!r){for(h in X)X[h].w=0;for(h=aa.length;h--;){k=aa[h];var f=Q.indexOf(k);ba("."+k+" ._,."+k+"._").each(function(a){for(var d=0;d<a.g.length;d++){var c=a.g[d],k=X[c.u],c=c.i;k&&c[f]&&(k.w+=h)}})}var n;k=-1;for(h in X){var e=X[h].w;e>k&&(k=e,n=h)}na=n;r=X[n]}k=r.width;n=r.height;if(W!=k||V!=n)W=k,V=n,U();for(k=0;k<ia.length;k++){n=ia[k];var l=n.b,e=!n.n||n.n.a,x=null,g=-1,m=-1,q=n.v;if(e){for(var t=0;t<n.g.length;t++){var u=
n.g[t];if(u.u==na){for(var e=0,w=n.i,v=u.i,h=d;h--;)w[h]==!!v[h]?e+=y[h]:v[h]&&(e=-Infinity);e>m&&(m=e,g=t,x=u.v)}}e=!!x}l.classed("hidden",!e);n.a=e;if(q!=g||a)if(n.k&&(n.j?(e=x?n.o:"none",n.n.b.attr({"clip-path":e}).style({"-webkit-clip-path":e,"clip-path":e})):x&&Y(n.b.select("div"),{left:("-"+x.left).replace("--",""),top:("-"+x.top).replace("--","")},null!=q)),x){if(e=n.s)m=x._opt,e.t=m&&m.pivot||"",e.e=m&&m["default"];n.v=g;n.f=x._rect;n.x=x._act;if(g=x._content){var g=l.selectAll("p").data(g),
I=g.size();g.exit().remove();g.enter().append("p");g.html(function(a,d){Y(H(this),p[a._base],d<I);return a.text})}if(null==q||a||!F(n.g[q].v,x))x._base&&(x=O(p[x._base],x)),Y(l,x,null!=q);b.push(n)}else n.f=null,n.v=null}for(k=0;k<b.length;k++)n=b[k],d=(d=n.x)&&d.load,y=b[k]=n.b.node(),d&&S.call(y,{y:d,z:new ja(y,"load")});k&&ca.update.call(this,{elements:b});sa=!1;if(ma.length){var b=ma,z;ma=[];for(J();b.length;)(z=b.shift())&&z()}c&&c()}}function Y(a,c,d){var h={},b={},k;for(k in c)"_"!=k[0]&&(0==
k.search("svg-")?h[k.slice(4)]=c[k]:b[k]=c[k]);d?(k=a.node(),c=ta(k),d=ua(k),k=va(k).split(" "),a.transition().ease(k[0],k[1]).duration(c).delay(d).style(b).attr(h)):a.style(b).attr(h)}function C(a,c,d){if(a&&a!=e){var h={},b;for(b in L)a==L[b].scene&&(h[b]=L[b]);Object.keys(h).length&&(ca.navigate.call(this,{oldScene:e,newScene:a}),e=a,X=h,na=Object.keys(h)[0],r=h[na],J(!1,function(){c?D(c):da&&!d&&D()}))}}function E(a,c,d){c||(d=a.C,c=a.B,a=a.G);if(2==a)if(A&&A.s)a=H(".button.focus").node(),oa[c].call(a,
d);else{var b=A?A.p:M;G.E(b,7,{G:a,B:c,C:d})}else 0==a?oa[c].call(h,d):1==a?G.E(M,c,d):(b=H(a).datum().p)?G.E(b,c,d):oa[c].call(a,d)}function N(a,c){var d=T.filter(P);G.F(d,2,b,function(h){var b=[],k=0;ba(".button:not(.hidden):not(.disabled),iframe:not(.hidden):not(.disabled)").each(function(a){var c=a.s;if(c){if(a=a.m())c.f=a,b[k++]=c}else if(c=d.indexOf(a),0<=c)for(c=h[c],a=c.length;a--;)b[k++]=c[a]});if(a)for(var e=b.length;e--;){var f=b[e];f.f=v(f.f,a[0],a[1],I,I)}c&&c(b)})}function ea(a,c){if(c){var d=
c.length;a=za[a];var h=u(c,t);if(!h)return null;var b=null,k;if(4>a)for(var h=h.f,e=Aa[a],f=e[4]-1,r=e[0],n=e[1],l=e[2],e=e[3];d--;){var g=c[d],m=Ba[a],q=g.t,m=[(g.f[l]-h[e])*f,q.length&&m&&m.test(q)?-1:0],q=Math.min(g.f[r],h[r])-Math.max(g.f[n],h[n]);if(0<=m[0]+8&&(m[1]||8<q))for(m[0]>>=3,m[2]=g.f[n]>>3,q=0;3>q;q++)if(!k||m[q]<k[q]){b=g;k=m;break}else if(m[q]>k[q])break}else b=c.indexOf(h),b=c[((4==a?b+1:b-1)+d)%d];b&&B(b)}else N(0,function(c){ea(a,c)})}function B(a,c){var d;da=!1;ba(".has-focus").classed("has-focus",
0);(wa=a)&&fa===a.q&&(da=!0,d=ka(H("#"+a.o).datum()));G.F(T,3,a,function(a){for(var h=a.length;h--;)a[h]&&(da=!0,d=ka(T[h]));da||(d=ka());d&&J();c&&c(da)})}function ka(a){if(A!=a){A&&(A.s&&(A.s.d=!1),ba(".focus").classed("focus",0));if(a){a.s&&(a.s.d=!0);a.b.classed("focus",1);for(var c=a;c;)c.b.classed("has-focus",1),c=c.n}ca.focuschange.call(this,{oldFocus:A&&A.b.node(),newFocus:a&&a.b.node()});A=a;return 1}}function D(a){a?(a instanceof Array&&(a=u(a,w)||a[0]),M?G.E(M,6,a):a&&B(a)):N(0,D)}function pa(){for(var a;a=
ga.pop();)if(a[0]!=e)return C(a[0],a[1]);M&&G.E(M,5)}function ja(a,c,d){return{src:fa+(fa?"/":"")+(a.id||""),type:c,data:d}}function Z(a,c){a&&(fa=a,ba(".button").each(function(c){c.s.q=a}),qa=c,M=this.source);T.every(z)&&(ra&&!qa||G.F(T,1,function(a){return a.q=(fa?fa+"/":"")+a.o},function(){qa?qa():D();ca.ready.call(this,{isMaster:!ra})}))}function S(a){var c=a.y;a=a.z||new ja(this,"",a.C);if(c){for(var c=c+",",d=!1,h=c.length,b="",k=[],e=[],r=0;r<h;r++){var g=c[r];'"'==g?d=!d:d?b+=g:" "==g||","==
g?(b.length&&(k.push(b),b=""),","==g&&k.length&&(e.push(k),k=[])):b+=g}for(r=0;r<e.length;r++)if(c=e[r],d=f[c[0]])a.args=c,d.call(this,a)}}var K=proto_data,L=K.artboards,R=K.settings,Q=K.states,h=window,f=[],e,r,na,X,W,V,I,H=d3.select,ba=d3.selectAll,ha=d3.functor,xa=h.addEventListener,ia=[],T=[],M,fa="",qa,ga=[],da=!1,A,wa,ta=ha(R.transition_duration),va=ha(R.easing_func+"-"+R.easing_mode),ua=ha(0),la=R.auto_scale,aa=["press","focus","hover"],ca=d3.dispatch("fallback","ready","focuschange","navigate",
"update"),ra=null!=h.location.search.match(/\bembedded\b/),sa=!1,ma=[],za={U:0,R:1,D:2,L:3,N:4,P:5},ya=/[^:]+/g,Ba=[/u|y|a/i,/r|x|a/i,/d|y|a/i,/l|x|a/i],Aa=["20310","31022","20132","31200"],oa=[null,Z,N,B,function(a){var c;"src"in a?c=u(T,function(c){return!a.src.search(c.q+"/")}):(c=H(this).datum(),a=new ja(this,a.H,a.C));for(var d=a.type,b=!1;c;){var h=c.x;if(h&&h[d]){S.call(c.b.node(),{y:h[d],z:a});b=!0;break}c=c.n}b||(M?G.E(M,4,a):ca.fallback.call(this,a))},pa,D,E,S],G=function(a){function c(a,
c,h,e){if(a){var f="r"+b++;e&&(d[f]=e);a.postMessage({o:f,A:!!e,B:c,C:h},"*")}}var d={},b=0;xa("message",function(c){var b=c.data,h=b.C,e=b.B;0==e?(e=h.o,d[e]&&(d[e](h.C),d[e]=null)):(b=b.A?function(a){G.D(c,a)}:null,(e=a[e])&&e.call(c,h,b))});return{E:c,F:function(a,d,b,h){var e=a.length,f=[];!e&&h&&h(f);a.map(function(a,r){var g="function"==typeof b?b(a,r):b;c(a.p,d,g,function(a){f[r]=a;!--e&&h&&h(f)})})},D:function(a,d){c(a.source,0,{o:a.data.o,C:d})}}}(oa);return{SELF:0,PARENT:1,FOCUS:2,init:function(){var a=
K.keyframes,c;for(c in a)new l(c,a[c]);xa("resize",U);C(L[0].scene);Z()},tell:function(a,c,d){E(a,8,{y:c,C:d})},move:ea,trigger:function(a,c,d){c&&E(a,4,{H:c,C:d})},on:function(a,c){return ca.on(a,c)},back:pa,update:J,focus:function(a){if(a){var c=H(a).datum(),d=c.s;d?D(d):c.p&&E(a,6)}},"goto":function(a,c){var d=ga.pop();d&&d[0]!=e&&ga.push(d);ga.push([e,wa]);99<ga.length&&ga.shift();C(a,null,c)},define:function(a,c){a.pop||(a=[a]);for(var d=a.length;d--;)f[a[d]]=c},option:function(a,c){var d=void 0===
c;switch(a){case "duration":return d?ta:ta=ha(c);case "delay":return d?ua:ua=ha(c);case "easing":return d?va:va=ha(c);case "autoscale":return d?la:U(la=c);case "states":return d?aa:aa=c}}}}();
(function(){function u(b,l){var g=b.split("/").filter(Boolean);return[g[l?"pop":"shift"](),g.join("/")]}function v(b){return d3.selectAll('[data-name="'+b+'"]')[0]}function O(b,l,g){for(var m=!1,q=b.length;q--;){var t=b[q].classList,u=t.contains(g);if("add"==l?!u:"remove"==l?u:1)m=!0;t[l](g)}m&&z.update()}function F(b){var l=u(b,0),g=l[0];b=l[1];var m='"'+[].slice.call(arguments,1).join('" "')+'"';b&&(m="tell "+b+" "+m);"."==g?w(proto.PARENT,m):v(g).map(function(b){w(b,m)})}function P(b){b=u(b,1);
var l=b[0];(b=b[1])?F(b,"focus",l):(l=v(l)[0])&&z.focus(l)}var z=proto,t=z.define,w=z.tell;t(["set","unset","toggle"],function(b){var l,g=b.args;b=g[0];l=g[1];if(g=g[2]){l=u(l,1);var m=l[0];if(l=l[1]){F(l,b,m,g);return}l=v(m)}else g=l,l=[this];O(l,"set"==b?"add":"unset"==b?"remove":"toggle",g)});t("tell",function(b){F.apply(this,b.args.slice(1))});t("do",function(b){z.trigger(2,b.args[1])});t("move",function(b){z.move(b.args[1])});t("wait",function(b){b=b.args;var l='"'+[].slice.call(b,2).join('" "')+
'"',g=this;setTimeout(function(){w(g,l)},1*b[1])});t("goto",function(b){b=b.args;var l=b[1];"focus"==b[2]?(z["goto"](l,!0),P(b[3])):z["goto"](l)});t(["enable","disable","toggle-enable"],function(b){function l(b){if(b.classList.contains("button")||"IFRAME"==b.tagName)q.push(b);else{b=b.querySelectorAll(".button,iframe");for(var g=b.length;g--;)q.push(b[g])}}var g=b.args;b=g[0];var m=g[1],q=[];m?(m=u(m,1),g=m[0],(m=m[1])?F(m,b,g):v(g).map(l)):l(this);O(q,"disable"==b?"add":"enable"==b?"remove":"toggle",
"disabled")});t("focus",function(b){P(b.args[1])});t("back",function(){z.back()})})();
proto.on("ready.input",function(u){function v(b){return!b.classList.contains("disabled")}function O(b){if(J!=b){var f=document.body.classList;J&&f.remove(J);f.add(b);J=b;N()}}function F(){v(this)&&(this.classList.add("press"),N())}function P(){U(".button.press").classed("press",!1).size()&&N()}function z(b){var f=typeof b;if("string"==f||"number"==f)return!0;if("object"==f){for(var e in b)if(f=typeof b[e],"string"!=f&&"number"!=f)return!1;return!0}}function t(b){var f={},e;for(e in b){var r=b[e];
z(r)&&(f[e]=r)}return f}var w=u.isMaster,b=proto;u=proto_data.settings;var l=!1,g=!1,m=!1,q=window.addEventListener,U=d3.selectAll,J,Y=b.define,C=b.tell,E=b.trigger,N=b.update,ea=b.move,B=b.FOCUS;b.on("fallback",function(b){b=b.type;switch(b){case "L":case "R":case "U":case "D":ea(b);break;case "TAB":ea("N");break;case "STAB":ea("P");break;case "B":case "ESC":case "BACK":C(B,"back")}});Y("_input",function(b){O(b.args[1])});Y("_press",F);Y("_release",P);if(u.input_controller&&w){var ka=function(b,
f){this.P=b;this.J=f;this.R=0;this.N=!1;var e=this.Q=0,r=18,g=0,l=0;this.I=function(b,h){this.R=h||0;b?(0<e?e--:(D("buttondown",this),this.Q++,e=r,2<r&&(r=2*r/3)),this.N||(g=12),0<g&&g--):this.N&&(D("buttonup",this),e=0,r=18,this.Q=0,0<g&&(0<l?(D("buttondbltap",this),l=0):l=24));0<l&&(l--,0==l&&D("buttontap",this));this.N=b}},D=function(b,f){var e={controller:f.P,button:f.J.O,repeated:f.Q,value:f.R,isHandled:!1},g=document.createEvent("CustomEvent");g.initCustomEvent(b,!1,!1,e);window.dispatchEvent(g)},
pa=function(b){this.I=(new ja(b,Q)).I},ja=function(b,f){for(var e=[],g=0;g<f.length;g++)e[g]=new ka(b,f[g]);this.I=function(b){for(var h=e.length;h--;){var g=e[h],f=g.J;if(null!=f.K){var r=b.buttons[f.K];r&&g.I(r.pressed,r.value)}else null!=f.L&&(r=b.axes[f.L],f=r*f.M,g.I(.7<f?!0:.2>f?!1:g.N,r))}}},Z=function(){L=Date.now();if(L-K>R){K=L-(L-K)%R;for(var b=navigator.getGamepads(),f=0;f<b.length;f++){var e=b[f];e&&(S[f]||/xbox 360|controller/i.test(e.id)&&15<=e.buttons.length&&(S[f]=new pa(f)),S[f]&&
S[f].I(e))}}window.requestAnimationFrame(Z)},S=[],K=Date.now(),L,R=17;navigator.getGamepads&&(Z(),w=function(b){return function(f){f=f.detail;f.isHandled||E(2,b[f.button],f)}},q("buttondown",w({LStickLeft:"L",DpadLeft:"L",LStickRight:"R",DpadRight:"R",LStickUp:"U",DpadUp:"U",LStickDown:"D",DpadDown:"D",LB:"LB",RB:"RB",LT:"LT",RT:"RT"})),q("buttonup",w({A:"A",B:"B",X:"X",Start:"Menu",Back:"View"})),q("buttontap",w({Y:"Y"})),q("buttondbltap",w({Y:"dblY"})),q("buttondown",function(b){C(B,"_input controller");
"A"!=b.detail.button||l||(l=!0,C(B,"_press"))}),q("buttonup",function(b){"A"==b.detail.button&&(l=!1,C(B,"_release"))}));var Q=[{K:0,O:"A"},{K:1,O:"B"},{K:2,O:"X"},{K:3,O:"Y"},{K:4,O:"LB"},{K:5,O:"RB"},{K:6,O:"LT"},{K:7,O:"RT"},{K:8,O:"Back"},{K:9,O:"Start"},{K:10,O:"LStick"},{K:11,O:"RStick"},{K:12,O:"DpadUp"},{K:13,O:"DpadDown"},{K:14,O:"DpadLeft"},{K:15,O:"DpadRight"},{L:0,M:-1,O:"LStickLeft"},{L:0,M:1,O:"LStickRight"},{L:1,M:-1,O:"LStickUp"},{L:1,M:1,O:"LStickDown"},{L:2,M:-1,O:"RStickLeft"},
{L:2,M:1,O:"RStickRight"},{L:3,M:-1,O:"RStickUp"},{L:3,M:1,O:"RStickDown"}]}u.input_keyboard&&(w=function(b,f){return function(e){var g=e.keyCode;e.shiftKey&&(g+="+");if(g=f(g)||b[g])E(B,g,t(e)),e.preventDefault()}},q("keydown",w({37:"L",38:"U",39:"R",40:"D",9:"TAB","9+":"STAB"},function(b){C(B,"_input keyboard");13!=b||g||(g=!0,C(B,"_press"))})),q("keyup",w({8:"BACK",27:"ESC",32:"SPACE",33:"PGUP",34:"PGDN",35:"END",36:"HOME"},function(b){var f=String.fromCharCode(b);if(65<=b&&90>=b)return f+"Key";
if(48<=b&&57>=b)return"D"+f;if(13==b)return g=!1,C(B,"_release"),"ENTER"})));u.input_mouse&&(U(".button").on("mouseenter",function(){v(this)&&(this.classList.add("hover"),N())}).on("mouseleave",function(){this.classList.remove("hover");N()}).on("mousedown",function(){v(this)&&(O("mouse"),F.call(this),b.focus(this))}).on("click",function(){v(this)&&E(this,"MLB",t(d3.event))}).on("dblclick",function(){v(this)&&E(this,"dblMLB",t(d3.event))}).on("contextmenu",function(){v(this)&&E(this,"MRB",t(d3.event));
d3.event.preventDefault()}),q("mouseup",function(){P()}));if(u.input_touch)U("head").append("script").attr("type","text/javascript").attr("src","https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.6/hammer.min.js").on("load",function(){var g=function(b){for(b=b.target;b&&!b.classList.contains("button");)b=b.parentElement;return b},f=function(b){return function(e){var f=e.pointerType;("touch"==f||"pen"==f)&&(f=g(e))&&E(f,b,t(e))}},e=Hammer;(new e.Manager(document.body,{recognizers:[[e.Tap],[e.Press],
[e.Pan],[e.Pinch,null,["pan"]],[e.Swipe,null,["pan"]]]})).on("tap",f("TAP")).on("press",f("HOLD")).on("panend panmove",f("PAN")).on("swipeup",f("SWIPEU")).on("swipedown",f("SWIPED")).on("swipeleft",f("SWIPEL")).on("swiperight",f("SWIPER")).on("pinchend pinchmove",f("PINCH")).on("hammer.input",function(e){var f=e.pointerType;if("touch"==f||"pen"==f){e.preventDefault();var l=0<e.srcEvent.touches.length;l&&!m?(e=g(e))&&v(e)&&(O(f),F.call(e),b.focus(e)):!l&&m&&P();m=l}})})});
